<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spin the Constellations</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0c0a1a;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='40' viewBox='0 0 40 40'%3E%3Cg fill-rule='evenodd'%3E%3Cg fill='%239C92AC' fill-opacity='0.1'%3E%3Cpath d='M0 38.59l2.83-2.83 1.41 1.41L1.41 40H0v-1.41zM0 1.4l2.83 2.83 1.41-1.41L1.41 0H0v1.41zM38.59 40l-2.83-2.83 1.41-1.41L40 38.59V40h-1.41zM40 1.41l-2.83 2.83-1.41-1.41L38.59 0H40v1.41zM20 18.6l2.83-2.83 1.41 1.41L21.41 20l2.83 2.83-1.41 1.41L20 21.41l-2.83 2.83-1.41-1.41L18.59 20l-2.83-2.83 1.41-1.41L20 18.59z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }
        /* Removed the CSS transition to allow for smoother JS animation */
        #wheelCanvas {
            border: 4px solid rgba(165, 180, 252, 0.5);
            box-shadow: 0 0 20px rgba(129, 140, 248, 0.5);
        }
        .pointer {
            width: 0;
            height: 0;
            border-left: 20px solid transparent;
            border-right: 20px solid transparent;
            border-top: 40px solid #facc15; /* yellow-400 */
            filter: drop-shadow(0 0 5px #facc15);
        }
    </style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen text-white p-4">

    <div class="text-center mb-8">
        <h1 class="text-5xl md:text-6xl font-black text-white">Spin the Constellations</h1>
        <p class="mt-2 text-lg text-gray-400">Discover the stories written in the stars.</p>
    </div>

    <div class="relative w-[320px] h-[320px] md:w-[500px] md:h-[500px] flex items-center justify-center">
        <div class="absolute top-[-10px] z-10">
            <div class="pointer"></div>
        </div>
        <canvas id="wheelCanvas" width="500" height="500" class="rounded-full"></canvas>
    </div>

    <button id="spinBtn" class="mt-8 bg-indigo-600 text-white font-bold text-xl py-4 px-10 rounded-full shadow-lg hover:bg-indigo-700 active:scale-95 transition-transform duration-150 disabled:bg-gray-500 disabled:cursor-not-allowed">
        SPIN THE WHEEL
    </button>

    <!-- Constellation Info Modal -->
    <div id="infoModal" class="fixed inset-0 bg-black bg-opacity-70 backdrop-blur-sm flex items-center justify-center p-4 z-50 hidden">
        <div class="bg-[#1e1b3a] border border-indigo-400 rounded-2xl shadow-2xl p-8 max-w-lg w-full text-center">
            <h2 id="modalTitle" class="text-4xl font-black text-yellow-300 mb-4">Constellation Name</h2>
            <p id="modalInfo" class="text-gray-300 text-lg">Information about the constellation will appear here.</p>
            <button id="closeModalBtn" class="mt-8 bg-red-600 text-white font-bold py-2 px-6 rounded-full hover:bg-red-700 transition-colors">Close</button>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('wheelCanvas');
        const spinBtn = document.getElementById('spinBtn');
        const modal = document.getElementById('infoModal');
        const modalTitle = document.getElementById('modalTitle');
        const modalInfo = document.getElementById('modalInfo');
        const closeModalBtn = document.getElementById('closeModalBtn');
        
        const ctx = canvas.getContext('2d');
        const constellations = [
            { name: "Orion", info: "Orion, the Hunter, is one of the most recognizable constellations. It is known for its 'belt' of three bright stars in a row and contains the famous Orion Nebula." },
            { name: "Ursa Major", info: "Also known as the Great Bear, Ursa Major contains a famous group of stars called the Big Dipper. It's used by navigators to find Polaris, the North Star." },
            { name: "Cassiopeia", info: "Named after a vain queen, Cassiopeia forms a 'W' or 'M' shape in the sky. It is located in the Milky Way and is rich with star clusters." },
            { name: "Scorpius", info: "Scorpius, the Scorpion, is a large constellation in the southern hemisphere. It features the bright, red giant star Antares, which marks the scorpion's heart." },
            { name: "Leo", info: "Leo, the Lion, is one of the constellations of the zodiac. It is best seen in the spring and its brightest star is Regulus. It looks like a lion's mane or a sickle." },
            { name: "Taurus", info: "Taurus, the Bull, is another zodiac constellation known for the bright star Aldebaran and the beautiful Pleiades star cluster, also known as the Seven Sisters." },
            { name: "Cygnus", info: "Cygnus, the Swan, flies along the Milky Way. It contains a prominent asterism known as the Northern Cross. Its brightest star, Deneb, is one of the most distant stars visible to the naked eye." },
            { name: "Aquila", info: "Aquila, the Eagle, is located on the celestial equator. Its brightest star is Altair, which is one of the three stars that form the Summer Triangle." },
            { name: "Pegasus", info: "Pegasus, the Winged Horse, is a large constellation in the northern sky. It is easily recognizable by the Great Square of Pegasus, a large asterism." },
            { name: "Ursa Minor", info: "Also known as the Little Bear, this constellation contains Polaris, the North Star, at the tip of its tail. It forms the Little Dipper asterism." }
        ];

        const numSegments = constellations.length;
        const segmentAngle = (2 * Math.PI) / numSegments;
        const colors = ["#4f46e5", "#4338ca"];
        let currentRotation = 0;
        let isSpinning = false;
        let spinVelocity = 0;
        const spinFriction = 0.995;

        function drawWheel() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.font = 'bold 20px Inter, sans-serif';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';

            for (let i = 0; i < numSegments; i++) {
                const angle = i * segmentAngle;
                ctx.beginPath();
                
                // Create a radial gradient for a nebula effect
                const gradient = ctx.createRadialGradient(250, 250, 20, 250, 250, 250);
                gradient.addColorStop(0, colors[i % colors.length]);
                gradient.addColorStop(1, '#1e1b3a');
                ctx.fillStyle = gradient;

                ctx.moveTo(250, 250);
                ctx.arc(250, 250, 250, angle, angle + segmentAngle);
                ctx.lineTo(250, 250);
                ctx.fill();

                // Draw segment divider
                ctx.strokeStyle = 'rgba(255, 255, 255, 0.1)';
                ctx.lineWidth = 1;
                ctx.stroke();

                ctx.save();
                ctx.fillStyle = 'white';
                ctx.translate(250, 250);
                ctx.rotate(angle + segmentAngle / 2);
                ctx.fillText(constellations[i].name, 160, 0);
                ctx.restore();
            }
        }

        function updateSpin() {
            if (!isSpinning) return;
            
            currentRotation += spinVelocity;
            canvas.style.transform = `rotate(${currentRotation}deg)`;
            
            spinVelocity *= spinFriction;
            
            if (Math.abs(spinVelocity) < 0.05) {
                stopSpin();
            } else {
                requestAnimationFrame(updateSpin);
            }
        }

        function stopSpin() {
            isSpinning = false;
            spinBtn.disabled = false;
            
            const normalizedAngle = (360 - (currentRotation % 360)) % 360;
            const segmentSize = 360 / numSegments;
            const winningIndex = Math.floor(normalizedAngle / segmentSize);
            
            const winner = constellations[winningIndex];
            setTimeout(() => {
                modalTitle.textContent = winner.name;
                modalInfo.textContent = winner.info;
                modal.classList.remove('hidden');
            }, 500); // Small delay for the wheel to fully settle
        }

        spinBtn.addEventListener('click', () => {
            if (isSpinning) return;
            isSpinning = true;
            spinBtn.disabled = true;
            spinVelocity = Math.random() * 20 + 25; // A random powerful initial spin
            updateSpin();
        });

        closeModalBtn.addEventListener('click', () => {
            modal.classList.add('hidden');
        });

        drawWheel();
    </script>
</body>
</html>