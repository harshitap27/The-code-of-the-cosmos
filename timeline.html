<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Cosmic Journey</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #000;
            color: #fff;
            overflow-x: hidden; /* Prevent horizontal scroll on the body, but allow vertical */
        }
        #bg-canvas {
            position: fixed;
            top: 0;
            left: 0;
            outline: none;
            z-index: 1;
        }
        #timeline-container {
            width: 100%;
            height: 100vh;
            overflow: hidden; /* This container should not scroll itself */
            z-index: 2; /* On top of the canvas */
            position: relative;
        }
        #timeline-wrapper {
            width: 1000vw; /* 10 sections * 100vw */
            height: 100vh;
            display: flex;
            will-change: transform;
        }
        .timeline-section {
            width: 100vw;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 2rem;
            position: relative;
            flex-shrink: 0;
        }
        .content {
            text-align: center;
            max-width: 600px;
            opacity: 0; /* Animate in with GSAP */
            background: rgba(0,0,0,0.5);
            backdrop-filter: blur(5px);
            padding: 2rem;
            border-radius: 1rem;
        }
        .content h2 {
            font-size: 3rem; font-weight: 900;
        }
        .content p {
            font-size: 1.25rem; color: #d1d5db; margin-top: 1rem;
        }
    </style>
</head>
<body>

    <canvas id="bg-canvas"></canvas>
    
    <div id="timeline-container">
        <div id="timeline-wrapper">
            <section class="timeline-section">
                <div class="content">
                    <h2>The Beginning of Everything</h2>
                    <p>13.8 billion years ago, the entire universe was smaller than an atom. In an instant, it exploded with unimaginable energy. This was the Big Bang, the birth of space, time, and all matter.</p>
                </div>
            </section>
            <section class="timeline-section">
                <div class="content">
                    <h2>The Universe Becomes See-Through</h2>
                    <p>For 380,000 years, the universe was a foggy soup. As it cooled, atoms formed, and light could finally travel freely. This first light, the 'afterglow' of the Big Bang, is still visible today as the Cosmic Microwave Background.</p>
                </div>
            </section>
             <section class="timeline-section">
                <div class="content">
                    <h2>The Great Darkness</h2>
                    <p>After the first light faded, there were no stars to illuminate the cosmos. For hundreds of millions of years, the universe was a dark, quiet place, filled with clouds of hydrogen gas drifting in the dark.</p>
                </div>
            </section>
            <section class="timeline-section">
                <div class="content">
                    <h2>Let There Be Light</h2>
                    <p>Gravity began to pull the gas clouds together. The immense pressure triggered nuclear fusion, and the first stars were born. These giants were hundreds of times bigger than our Sun and burned for only a few million years.</p>
                </div>
            </section>
            <section class="timeline-section">
                <div class="content">
                    <h2>Our Cosmic Home is Built</h2>
                    <p>The first stars formed star clusters, which then merged to become the first small galaxies. Over billions of years, these galaxies collided and combined, building the grand spiral galaxy we call home: the Milky Way.</p>
                </div>
            </section>
            <section class="timeline-section">
                <div class="content">
                    <h2>Our Little Corner of the Cosmos</h2>
                    <p>Inside the Milky Way, a cloud of gas and dust left over from older stars collapsed. This formed our Sun. The remaining debris swirled around, clumping together to form Earth and the other planets in our Solar System.</p>
                </div>
            </section>
            <section class="timeline-section">
                <div class="content">
                    <h2>The Spark of Life</h2>
                    <p>On the young, hostile Earth, in the depths of the oceans, the first simple life emerged. These tiny microbes would change the planet forever, eventually creating the oxygen we breathe.</p>
                </div>
            </section>
            <section class="timeline-section">
                <div class="content">
                    <h2>The Universe Becomes Aware</h2>
                    <p>In the last tiny fraction of cosmic time, humans evolved. For the first time, a species emerged on Earth that could look up at the stars and wonder about its own origin.</p>
                </div>
            </section>
            <section class="timeline-section">
                <div class="content">
                    <h2>Reaching for the Stars</h2>
                    <p>We've only just begun our journey. In the last blink of a cosmic eye, we've sent probes to other planets, walked on the Moon, and built telescopes that can see back to the dawn of time.</p>
                </div>
            </section>
             <section class="timeline-section">
                <div class="content">
                    <h2>What's Next?</h2>
                    <p>The journey is far from over. New discoveries are made every day. The story of the universe is still being written, and you are a part of it. What will we discover next?</p>
                </div>
            </section>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/ScrollTrigger.min.js"></script>
    <script>
        // --- 3D SCENE SETUP ---
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ canvas: document.getElementById('bg-canvas'), antialias: true });
        const clock = new THREE.Clock();
        renderer.setSize(window.innerWidth, window.innerHeight);
        camera.position.z = 30;

        // --- 3D OBJECTS FOR THE TIMELINE ---
        const timelineObjects = new THREE.Group();
        const textureLoader = new THREE.TextureLoader();

        // General starfield
        const starGeometry = new THREE.BufferGeometry();
        const starVertices = [];
        for (let i = 0; i < 20000; i++) {
            starVertices.push(THREE.MathUtils.randFloat(0, 900), THREE.MathUtils.randFloatSpread(400), THREE.MathUtils.randFloatSpread(400));
        }
        starGeometry.setAttribute('position', new THREE.Float32BufferAttribute(starVertices, 3));
        const stars = new THREE.Points(starGeometry, new THREE.PointsMaterial({ color: 0xffffff, size: 0.2 }));
        timelineObjects.add(stars);

        // 1: Big Bang
        const bigBang = new THREE.Mesh(new THREE.SphereGeometry(0.1, 32, 32), new THREE.MeshBasicMaterial({ color: 0xffffff, transparent: true, opacity: 0 }));
        bigBang.position.x = 0;
        timelineObjects.add(bigBang);

        // 2: CMB
        const cmbTexture = textureLoader.load('https://science.nasa.gov/wp-content/uploads/2023/04/9yr_wmap_full_960_0-1.jpg');
        const cmb = new THREE.Mesh(new THREE.SphereGeometry(15, 64, 64), new THREE.MeshBasicMaterial({ map: cmbTexture, side: THREE.BackSide, transparent: true, opacity: 0.8 }));
        cmb.position.x = 100;
        timelineObjects.add(cmb);

        // 3: Dark Ages
        const gasTexture = textureLoader.load('https://threejs.org/examples/textures/lava/cloud.png');
        const darkAges = new THREE.Group();
        for (let i = 0; i < 30; i++) {
            const gasCloud = new THREE.Sprite(new THREE.SpriteMaterial({ map: gasTexture, color: 0x1a202c, blending: THREE.AdditiveBlending, opacity: 0.1, transparent: true }));
            gasCloud.scale.set(30, 30, 1);
            gasCloud.position.set(THREE.MathUtils.randFloatSpread(60), THREE.MathUtils.randFloatSpread(60), THREE.MathUtils.randFloatSpread(60));
            darkAges.add(gasCloud);
        }
        darkAges.position.x = 200;
        timelineObjects.add(darkAges);

        // 4: First Stars
        const firstStars = new THREE.Group();
        const starGlowTexture = textureLoader.load('https://threejs.org/examples/textures/lensflare/lensflare0.png');
        for (let i = 0; i < 20; i++) {
            const sprite = new THREE.Sprite(new THREE.SpriteMaterial({ map: starGlowTexture, color: 0x9bb0ff, blending: THREE.AdditiveBlending, opacity: 0.9, transparent: true }));
            const scale = THREE.MathUtils.randFloat(10, 20);
            sprite.scale.set(scale, scale, 1);
            sprite.position.set(THREE.MathUtils.randFloatSpread(70), THREE.MathUtils.randFloatSpread(70), THREE.MathUtils.randFloatSpread(70));
            firstStars.add(sprite);
        }
        firstStars.position.x = 300;
        timelineObjects.add(firstStars);

        // 5: Milky Way
        const galaxyPoints = new THREE.BufferGeometry();
        const galVertices = [];
        const colors = [];
        const color = new THREE.Color();
        for (let i=0; i<20000; i++) { 
            let r = Math.random() * 25;
            let spin = r * 2.5;
            let t = Math.random() * Math.PI * 2 + spin;
            let p = (Math.random() - .5) * Math.PI * .1; 
            galVertices.push(r*Math.cos(t)*Math.cos(p),r*Math.sin(t)*Math.cos(p),r*Math.sin(p)); 
            color.setHSL(r / 30, 1.0, 0.7);
            colors.push(color.r, color.g, color.b);
        }
        galaxyPoints.setAttribute('position', new THREE.Float32BufferAttribute(galVertices, 3));
        galaxyPoints.setAttribute('color', new THREE.Float32BufferAttribute(colors, 3));
        const milkyWay = new THREE.Points(galaxyPoints, new THREE.PointsMaterial({ size: 0.1, vertexColors: true, blending: THREE.AdditiveBlending }));
        milkyWay.position.x = 400;
        timelineObjects.add(milkyWay);

        // 6: Solar System
        const solarSystem = new THREE.Group();
        const sun = new THREE.Mesh(new THREE.SphereGeometry(5,32,32), new THREE.MeshBasicMaterial({color: 0xfef08a}));
        solarSystem.add(sun);
        const earthOrbit = new THREE.Group();
        const earth = new THREE.Mesh(new THREE.SphereGeometry(1.5,32,32), new THREE.MeshStandardMaterial({map: textureLoader.load('https://threejs.org/examples/textures/planets/earth_atmos_2048.jpg')})); 
        earth.position.x=12;
        earthOrbit.add(earth);
        solarSystem.add(earthOrbit);
        solarSystem.position.x = 500;
        timelineObjects.add(solarSystem);
        
        // 7: First Life (DNA Helix)
        const life = new THREE.Group();
        const dnaMaterial = new THREE.MeshStandardMaterial({ color: 0x4ade80, roughness: 0.5 });
        for (let i = 0; i < 30; i++) {
            const sphere1 = new THREE.Mesh(new THREE.SphereGeometry(0.3, 16, 16), dnaMaterial);
            sphere1.position.set(Math.cos(i * 0.5) * 2, i - 15, Math.sin(i * 0.5) * 2);
            const sphere2 = sphere1.clone();
            sphere2.position.set(-Math.cos(i * 0.5) * 2, i - 15, -Math.sin(i * 0.5) * 2);
            const cylinder = new THREE.Mesh(new THREE.CylinderGeometry(0.1, 0.1, 4, 8), new THREE.MeshStandardMaterial({color: 0x94a3b8}));
            cylinder.position.set(0, i-15, 0);
            cylinder.lookAt(sphere1.position);
            cylinder.rotateX(Math.PI/2);
            life.add(sphere1, sphere2, cylinder);
        }
        life.scale.set(0.8, 0.8, 0.8);
        life.position.x = 600;
        timelineObjects.add(life);
        
        // 8: Human Evolution (Glowing Outline)
        const humanPoints = [ new THREE.Vector3(0, 8, 0), new THREE.Vector3(0, 4, 0), new THREE.Vector3(-2, 2, 0), new THREE.Vector3(2, 2, 0), new THREE.Vector3(0, 4, 0), new THREE.Vector3(-3, 6, 0), new THREE.Vector3(3, 6, 0) ];
        const humanLine = new THREE.Line(new THREE.BufferGeometry().setFromPoints(humanPoints), new THREE.LineBasicMaterial({color: 0xffffff, linewidth: 2}));
        const humanGlow = new THREE.Sprite(new THREE.SpriteMaterial({ map: starGlowTexture, color: 0xffffff, blending: THREE.AdditiveBlending, opacity: 0.6, transparent: true }));
        humanGlow.scale.set(20, 20, 1);
        const human = new THREE.Group();
        human.add(humanLine, humanGlow);
        human.position.x = 700;
        timelineObjects.add(human);

        // 9: Rocket with trail
        const rocket = new THREE.Group();
        const rBody=new THREE.Mesh(new THREE.CylinderGeometry(0,1.5,8,32), new THREE.MeshStandardMaterial({color:0xffffff}));
        const rCone=new THREE.Mesh(new THREE.ConeGeometry(1.5,3,32), new THREE.MeshStandardMaterial({color:0xef4444})); rCone.position.y=4;
        rocket.add(rBody, rCone); rocket.rotation.z=Math.PI/4; rocket.position.x=800;
        timelineObjects.add(rocket);
        
        // 10: Future (Pulsing particle question mark)
        const qPointsMaterial = new THREE.PointsMaterial({ color: 0xffffff, size: 0.3, blending: THREE.AdditiveBlending, transparent: true });
        const qCurve = new THREE.CatmullRomCurve3([ new THREE.Vector3( 0, 5, 0 ), new THREE.Vector3( 3, 8, 0 ), new THREE.Vector3( 6, 5, 0 ), new THREE.Vector3( 6, 2, 0 ), new THREE.Vector3( 3, -1, 0 ) ]);
        const qLinePoints = new THREE.Points(new THREE.BufferGeometry().setFromPoints(qCurve.getPoints(100)), qPointsMaterial);
        const qDot = new THREE.Points(new THREE.BufferGeometry().setFromPoints([new THREE.Vector3(3, -5, 0)]), qPointsMaterial);
        const questionMark = new THREE.Group();
        questionMark.add(qLinePoints, qDot);
        questionMark.position.x = 900;
        timelineObjects.add(questionMark);


        scene.add(timelineObjects);
        scene.add(new THREE.AmbientLight(0xffffff, 0.5));
        const dirLight=new THREE.DirectionalLight(0xffffff,1); dirLight.position.set(0,0,1); scene.add(dirLight);

        // --- GSAP SCROLL ANIMATION ---
        gsap.registerPlugin(ScrollTrigger);

        const wrapper = document.querySelector("#timeline-wrapper");
        const sections = gsap.utils.toArray(".timeline-section");
        const totalWidth = wrapper.scrollWidth - window.innerWidth;

        const horizontalTween = gsap.to(wrapper, { x: () => -totalWidth + "px", ease: "none",
            scrollTrigger: { trigger: "#timeline-container", pin: true, scrub: 1, end: () => "+=" + totalWidth }
        });
        
        gsap.to(camera.position, { x: 900, ease: "none",
            scrollTrigger: { trigger: "#timeline-container", scrub: 1, end: () => "+=" + totalWidth }
        });

        // Animation for Big Bang expansion
        gsap.to(bigBang.scale, { x: 300, y: 300, z: 300,
            scrollTrigger: { trigger: "#timeline-container", scrub: 1, start: "top top", end: "top -=" + (window.innerWidth/2) }
        });
        gsap.to(bigBang.material, { opacity: 1,
            scrollTrigger: { trigger: "#timeline-container", scrub: 1, start: "top top", end: "top -=" + (window.innerWidth/4) }
        });
         gsap.to(bigBang.material, { opacity: 0,
            scrollTrigger: { trigger: "#timeline-container", scrub: 1, start: "top -=" + (window.innerWidth/4), end: "top -=" + (window.innerWidth/2) }
        });

        sections.forEach(section => {
            const content = section.querySelector(".content");
            gsap.fromTo(content, { opacity: 0, y: 50 }, { opacity: 1, y: 0, duration: 1,
                scrollTrigger: { 
                    trigger: section, 
                    containerAnimation: horizontalTween, 
                    start: "left center", 
                    toggleActions: "play none none reverse"
                }
            });
        });

        // --- RENDER LOOP ---
        function animate() {
            requestAnimationFrame(animate);
            const delta = clock.getDelta();
            
            darkAges.rotation.y += delta * 0.1;
            milkyWay.rotation.y += delta * 0.05;
            earthOrbit.rotation.y += delta * 0.5;
            life.rotation.y += delta * 0.1;
            human.rotation.y += delta * 0.1;
            
            const time = clock.getElapsedTime();
            qPointsMaterial.opacity = Math.sin(time * 3) * 0.5 + 0.5;

            renderer.render(scene, camera);
        }
        animate();

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });
    </script>
</body>
</html>